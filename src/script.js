/* eslint-disable no-undef */
/* eslint-disable no-unused-expressions */
/* eslint-disable no-restricted-globals */
const party_color_code = {
  "TMC+": "#83c700",
  TMC: "#83c700",
  "BJP+": "#f97d09",
  BJP: "#f97d09",
  "LEFT+": "#b80d2e",
  CPM: "#b80d2e",
  OTH: "#1d1d1d",
  CPI: "#ff0500",
  INC: "#498fcd",
  AIFB: "#b50000",
  "AADMK+": "#a9d600",
  ADMK: "#a9d600",
  "DMK+": "#f4da00",
  DMK: "#f4da00",
  "AMMK+": "#be222d",
  AMMK: "#be222d",
  NRC: "#393838",
  MNM: "#900c3f",
  "MNM+": "#900c3f",
  UDF: "#498fcd",
  "UDF+": "#498fcd",
  LDF: "#b80d2e",
  "LDF+": "#b80d2e",
  IUML: "#39572a",
  KC: "#393838",
  RSP: "#650000",
  RMP: "#393838",
  KCM: "#ffe866",
  AJP: "#293998",
  "AJP+": "#393838",
  AGP: "#8d00c7",
  UPPL: "#393838",
  AIUDF: "#00ff00",
  BPF: "#393838",
  RD: "#393838",
  VCK: "#4b006a",
  BSP: "#0034df",
  "INC+": "#498fcd",
  NCP: "#020072",
  RJD: "#348900",
  AC: "#1d1d1d",
  AIADMK: "#a9d600",
  AITC: "#85d900",
  AUDF: "#1d1d1d",
  BJD: "#00b61d",
  INLD: "#016d08",
  "JD(S)": "#00923f",
  "JD(U)": "#79b166",
  JKN: "#ff2e24",
  JKNPP: "#1d1d1d",
  JKPDP: "#003d25",
  JMM: "#b400ff",
  KEC: "#1d1d1d",
  "KEC(M)": "#ffea00",
  LJP: "#ff0175",
  MAG: "#FFB000",
  MDMK: "#ff5a00",
  MPP: "#426800",
  MUL: "#1d1d1d",
  NPF: "#004169",
  PMK: "#114500",
  SAD: "#f4c300",
  SDF: "#d8CC25",
  SGF: "#1d1d1d",
  SHS: "#d93300",
  SP: "#dc0000",
  "SP+": "#dc0000",
  TDP: "#ffb401",
  TRS: "#ff0175",
  UDP: "#326115",
  UKKD: "#ff458b",
  ACNC: "#1d1d1d",
  AD: "#1d1d1d",
  ADSMK: "#1d1d1d",
  ADSP: "#1d1d1d",
  AIBS: "#1d1d1d",
  AIC: "#1d1d1d",
  AIDWC: "#1d1d1d",
  "AIFB(S)": "#1d1d1d",
  AIJMK: "#1d1d1d",
  AIMF: "#1d1d1d",
  AIMIM: "#007808",
  AIRP: "#1d1d1d",
  AIVP: "#1d1d1d",
  AJBP: "#1d1d1d",
  AJSP: "#1d1d1d",
  AJSUP: "#4100b9",
  AMB: "#1d1d1d",
  ANC: "#1d1d1d",
  AP: "#1d1d1d",
  APRD: "#1d1d1d",
  ARP: "#1d1d1d",
  ARWP: "#1d1d1d",
  ASDC: "#1d1d1d",
  ASP: "#1d1d1d",
  AWD: "#1d1d1d",
  BAP: "#1d1d1d",
  BBM: "#1d1d1d",
  BBP: "#1d1d1d",
  BCDP: "#1d1d1d",
  BCP: "#1d1d1d",
  BCUF: "#1d1d1d",
  BD: "#1d1d1d",
  BDBP: "#1d1d1d",
  BEP: "#1d1d1d",
  BGD: "#1d1d1d",
  BGTD: "#1d1d1d",
  BHBP: "#1d1d1d",
  BHC: "#1d1d1d",
  BHJAP: "#1d1d1d",
  BHPD: "#1d1d1d",
  BHPP: "#1d1d1d",
  BHSASP: "#1d1d1d",
  BJBCD: "#1d1d1d",
  BJBP: "#1d1d1d",
  BJJD: "#1d1d1d",
  BJKD: "#1d1d1d",
  BJKVP: "#1d1d1d",
  BJSH: "#1d1d1d",
  BJTP: "#1d1d1d",
  BKLJP: "#1d1d1d",
  BLKD: "#1d1d1d",
  BLPGL: "#1d1d1d",
  BMF: "#1d1d1d",
  BMM: "#1d1d1d",
  BMSM: "#1d1d1d",
  BNJD: "#1d1d1d",
  BNRP: "#1d1d1d",
  BOP: "#1d1d1d",
  BOPF: "#d40f59",
  BPC: "#1d1d1d",
  BPD: "#1d1d1d",
  BPJP: "#1d1d1d",
  BREM: "#1d1d1d",
  BRM: "#1d1d1d",
  BRP: "#1d1d1d",
  BRPP: "#1d1d1d",
  BSA: "#1d1d1d",
  BSC: "#1d1d1d",
  BSD: "#1d1d1d",
  BSK: "#1d1d1d",
  BSKP: "#1d1d1d",
  BSKPB: "#1d1d1d",
  BSKRP: "#1d1d1d",
  "BSP(AP)": "#1d1d1d",
  "BSP(K)": "#1d1d1d",
  BSRD: "#1d1d1d",
  BSSP: "#1d1d1d",
  BSSPA: "#1d1d1d",
  BUDM: "#1d1d1d",
  BUM: "#1d1d1d",
  BVA: "#f5e25f",
  BVM: "#1d1d1d",
  BVP: "#1d1d1d",
  BVVP: "#1d1d1d",
  CDF: "#1d1d1d",
  CGVP: "#1d1d1d",
  "CPI(ML)(L)": "#1d1d1d",
  CSP: "#1d1d1d",
  DBP: "#1d1d1d",
  DBSP: "#1d1d1d",
  DCP: "#1d1d1d",
  DESEP: "#1d1d1d",
  DGPP: "#1d1d1d",
  DMDK: "#eb438f",
  DPI: "#1d1d1d",
  DPK: "#1d1d1d",
  EKSP: "#1d1d1d",
  FCI: "#1d1d1d",
  GGP: "#1d1d1d",
  GMS: "#1d1d1d",
  GRIP: "#1d1d1d",
  HDVP: "#1d1d1d",
  HJCBL: "#eeb300",
  HJP: "#1d1d1d",
  HSPDP: "#f60002",
  IBSP: "#1d1d1d",
  ICSP: "#1d1d1d",
  IJP: "#1d1d1d",
  IPFB: "#1d1d1d",
  IPP: "#1d1d1d",
  IVD: "#1d1d1d",
  JANS: "#1d1d1d",
  JBP: "#1d1d1d",
  JBSP: "#1d1d1d",
  JCGP: "#1d1d1d",
  JCP: "#1d1d1d",
  JDP: "#1d1d1d",
  JGP: "#1d1d1d",
  JHJAM: "#1d1d1d",
  JHJM: "#1d1d1d",
  JHKP: "#1d1d1d",
  JJ: "#1d1d1d",
  JJJKMC: "#1d1d1d",
  JKANC: "#1d1d1d",
  JKD: "#1d1d1d",
  JKM: "#1d1d1d",
  JKP: "#1d1d1d",
  "JKP(N)": "#1d1d1d",
  JKPP: "#1d1d1d",
  JM: "#1d1d1d",
  JP: "#1d1d1d",
  JPC: "#1d1d1d",
  JPS: "#1d1d1d",
  JSP: "#1d1d1d",
  JSS: "#1d1d1d",
  JUP: "#1d1d1d",
  JVD: "#1d1d1d",
  JVM: "#ffc8da",
  KCVP: "#1d1d1d",
  KDC: "#1d1d1d",
  KKJHS: "#1d1d1d",
  KM: "#1d1d1d",
  KNMK: "#1d1d1d",
  KOKD: "#1d1d1d",
  KS: "#1d1d1d",
  KSVP: "#1d1d1d",
  KTMK: "#1d1d1d",
  KVSP: "#1d1d1d",
  LB: "#1d1d1d",
  LBP: "#1d1d1d",
  LD: "#1d1d1d",
  LJVM: "#1d1d1d",
  LKJP: "#1d1d1d",
  LKSGM: "#1d1d1d",
  LKSP: "#1d1d1d",
  LM: "#1d1d1d",
  LPSP: "#1d1d1d",
  LSP: "#1d1d1d",
  LSVP: "#1d1d1d",
  LSWP: "#1d1d1d",
  LTSD: "#1d1d1d",
  LVKP: "#1d1d1d",
  MADP: "#1d1d1d",
  MAMAK: "#1d1d1d",
  MANP: "#1d1d1d",
  MAP: "#1d1d1d",
  "MB(S)P": "#1d1d1d",
  MBP: "#1d1d1d",
  MC: "#1d1d1d",
  MCO: "#1d1d1d",
  "MCPI(S)": "#1d1d1d",
  MD: "#1d1d1d",
  MDP: "#1d1d1d",
  MJP: "#1d1d1d",
  MKD: "#1d1d1d",
  MKUP: "#1d1d1d",
  MMKA: "#1d1d1d",
  MMM: "#1d1d1d",
  MMUP: "#1d1d1d",
  MNS: "#76008c",
  MOP: "#1d1d1d",
  NBNP: "#1d1d1d",
  NDEP: "#1d1d1d",
  NDPF: "#1d1d1d",
  NELU: "#1d1d1d",
  NLHP: "#1d1d1d",
  NLP: "#1d1d1d",
  NMK: "#1d1d1d",
  NSCP: "#1d1d1d",
  NSSP: "#1d1d1d",
  NYP: "#1d1d1d",
  OMM: "#1d1d1d",
  PBHP: "#1d1d1d",
  PDA: "#e70001",
  PDF: "#ff4040",
  PDFO: "#1d1d1d",
  PDS: "#1d1d1d",
  PECP: "#1d1d1d",
  PG: "#1d1d1d",
  PKMK: "#1d1d1d",
  PLP: "#1d1d1d",
  PLC: "#ca621e",
  PMSP: "#1d1d1d",
  PNK: "#1d1d1d",
  PPA: "#d40f59",
  PPIS: "#1d1d1d",
  PPOI: "#1d1d1d",
  PRAP: "#1d1d1d",
  PRBD: "#1d1d1d",
  PRBP: "#1d1d1d",
  PRCP: "#1d1d1d",
  PRPI: "#1d1d1d",
  PRSP: "#1d1d1d",
  PT: "#1d1d1d",
  PTSS: "#1d1d1d",
  RAD: "#1d1d1d",
  RAJUP: "#1d1d1d",
  RALOP: "#1d1d1d",
  RALP: "#1d1d1d",
  RASAP: "#1d1d1d",
  RASD: "#1d1d1d",
  RASJP: "#1d1d1d",
  RBCP: "#1d1d1d",
  RBD: "#1d1d1d",
  RCP: "#1d1d1d",
  "RCPI(R)": "#1d1d1d",
  RDHP: "#1d1d1d",
  RDMP: "#1d1d1d",
  RDSD: "#1d1d1d",
  RGOP: "#1d1d1d",
  RJAP: "#1d1d1d",
  RJJM: "#1d1d1d",
  RJPK: "#1d1d1d",
  RJSD: "#1d1d1d",
  RJVP: "#1d1d1d",
  RKJP: "#1d1d1d",
  RKSP: "#1d1d1d",
  RLD: "#924500",
  RLP: "#1d1d1d",
  RMEP: "#1d1d1d",
  RMGLMP: "#1d1d1d",
  RMSP: "#1d1d1d",
  RND: "#1d1d1d",
  RNSP: "#1d1d1d",
  "RP(K)": "#1d1d1d",
  "RPC(S)": "#1d1d1d",
  RPI: "#652082",
  "RPI(A)": "#1d1d1d",
  "RPI(D)": "#1d1d1d",
  "RPI(KH)": "#1d1d1d",
  RPIE: "#1d1d1d",
  RPP: "#1d1d1d",
  RPPI: "#1d1d1d",
  RRD: "#1d1d1d",
  RRS: "#1d1d1d",
  RSBP: "#1d1d1d",
  RSMD: "#1d1d1d",
  "RSP(S)": "#1d1d1d",
  RSPS: "#1d1d1d",
  RSUPRP: "#1d1d1d",
  RSWD: "#1d1d1d",
  RTKP: "#1d1d1d",
  RVNP: "#1d1d1d",
  RVP: "#1d1d1d",
  RWS: "#1d1d1d",
  RWSP: "#1d1d1d",
  RYS: "#1d1d1d",
  "SAD(M)": "#1d1d1d",
  SAMO: "#1d1d1d",
  SAP: "#1d1d1d",
  SBSP: "#1d1d1d",
  SGPP: "#1d1d1d",
  SHRP: "#1d1d1d",
  SJEP: "#1d1d1d",
  "SJP(R)": "#1d1d1d",
  SJTP: "#1d1d1d",
  SKP: "#1d1d1d",
  "SLP(L)": "#1d1d1d",
  SMBHP: "#1d1d1d",
  SSBD: "#1d1d1d",
  SSD: "#1d1d1d",
  STBP: "#1d1d1d",
  STPI: "#1d1d1d",
  SUSP: "#1d1d1d",
  SVPP: "#1d1d1d",
  SVRP: "#1d1d1d",
  SVSP: "#1d1d1d",
  SWJP: "#1d1d1d",
  SWP: "#c30e0e",
  SWPI: "#1d1d1d",
  THPI: "#1d1d1d",
  TPPP: "#1d1d1d",
  UCPI: "#1d1d1d",
  UGDP: "#1d1d1d",
  UMK: "#1d1d1d",
  UNLP: "#1d1d1d",
  UPRP: "#1d1d1d",
  UWF: "#1d1d1d",
  VAJP: "#1d1d1d",
  VHS: "#1d1d1d",
  VP: "#1d1d1d",
  VVS: "#1d1d1d",
  YFE: "#1d1d1d",
  YSP: "#1d1d1d",
  YVP: "#1d1d1d",
  YSRC: "#5e386d",
  IND: "#777777",
  "JCC(J)": "#f247fc",
  "JCC+": "#f247fc",
  MNF: "#00273a",
  CONG: "#498fcd",
  JDS: "#00923f",
  AAP: "#20350e",
  RLSP: "#336fba",
  GFP: "#3e3274",
  IPFT: "#3c4825",
  AINRC: "#427c4d",
  YSRCP: "#5e386d",
  JDU: "#b400ff",
  MPC: "#960A19",
  "AIADMK+": "#a9d600",
  ZNP: "#bd002c",
  CPIM: "#b80d2e",
  BoPF: "#d40f59",
  LJSP: "#d90000",
  SS: "#d93300",
  NDPP: "#ba3337",
  MG: "#df5d12",
  SKM: "#5b3131",
  JCCJ: "#db52c0",
  NPP: "#e9a205",
  JKNC: "#ff2e24",
  JVMP: "#dd5a84",
  PWPI: "#1d1d1d",
  AJSU: "#1d1d1d",
  CPMLL: "#1d1d1d",
  NSAM: "#1d1d1d",
  MSCP: "#1d1d1d",
  GVP: "#FFF700",
  LIP: "#1d1d1d",
};

var _jsonp = (function () {
  let that = {};
  that.send = function (src, options) {
    let callback_name = options.callbackName || "callback",
      on_success = options.onSuccess || function () {},
      on_timeout = options.onTimeout || function () {},
      timeout = options.timeout || 10; // sec

    let timeout_trigger = window.setTimeout(function () {
      window[callback_name] = function () {};
      on_timeout();
    }, timeout * 1000);

    window[callback_name] = function (data) {
      window.clearTimeout(timeout_trigger);
      on_success(data);
    };

    let script = document.createElement("script");
    script.type = "text/javascript";
    script.async = true;
    script.src = src;

    if (src != undefined) {
      document.getElementsByTagName("head")[0].appendChild(script);
    }
  };
  // console.log("windows .... ",window)
  return that;
})();

// localization for hindi, default english starts
let stateArr = {
  english: {
    "uttar-pradesh": "uttar pradesh",
    punjab: "punjab",
    uttarakhand: "uttarakhand",
    goa: "goa",
    manipur: "manipur",
  },
  hindi: {
    "uttar-pradesh": "à¤‰à¤¤à¥à¤¤à¤° à¤ªà¥à¤°à¤¦à¥‡à¤¶",
    punjab: "à¤ªà¤‚à¤œà¤¾à¤¬",
    uttarakhand: "à¤‰à¤¤à¥à¤¤à¤°à¤¾à¤–à¤£à¥à¤¡",
    goa: "à¤—à¥‹à¤µà¤¾",
    manipur: "à¤®à¤£à¤¿à¤ªà¥à¤°",
  },
  punjab: {
    "uttar-pradesh": "à¨‰à©±à¨¤à¨° à¨ªà©à¨°à¨¦à©‡à¨¶",
    punjab: "à¨ªà©°à¨œà¨¾à¨¬",
    uttarakhand: "à¨‰à©±à¨¤à¨°à¨¾à¨–à©°à¨¡",
    goa: "à¨—à©‹à¨†",
    manipur: "à¨®à¨¨à©€à¨ªà©à¨°",
  },
  punjabi: {
    "uttar-pradesh": "à¨‰à©±à¨¤à¨° à¨ªà©à¨°à¨¦à©‡à¨¶",
    punjab: "à¨ªà©°à¨œà¨¾à¨¬",
    uttarakhand: "à¨‰à©±à¨¤à¨°à¨¾à¨–à©°à¨¡",
    goa: "à¨—à©‹à¨†",
    manipur: "à¨®à¨¨à©€à¨ªà©à¨°",
  },
  bengali: {
    "uttar-pradesh": "à¦‰à¦¤à§à¦¤à¦° à¦ªà§à¦°à¦¦à§‡à¦¶",
    punjab: "à¦ªà¦žà§à¦œà¦¾à¦¬",
    uttarakhand: "à¦‰à¦¤à§à¦¤à¦°à¦¾à¦–à¦£à§à¦¡",
    manipur: "à¦®à¦£à¦¿à¦ªà§à¦°",
    goa: "à¦—à§‹à¦¯à¦¼à¦¾",
  },
  lokmat: {
    "uttar-pradesh": "à¤‰à¤¤à¥à¤¤à¤° à¤ªà¥à¤°à¤¦à¥‡à¤¶",
    punjab: "à¤ªà¤‚à¤œà¤¾à¤¬",
    uttarakhand: "à¤‰à¤¤à¥à¤¤à¤°à¤¾à¤–à¤‚à¤¡",
    manipur: "à¤®à¤£à¤¿à¤ªà¥‚à¤°",
    goa: "à¤—à¥‹à¤µà¤¾",
  },
  gujarati: {
    "uttar-pradesh": "àª‰àª¤à«àª¤àª° àªªà«àª°àª¦à«‡àª¶",
    punjab: "àªªàª‚àªœàª¾àª¬",
    uttarakhand: "àª‰àª¤à«àª¤àª°àª¾àª–àª‚àª¡",
    manipur: "àª®àª£à«€àªªà«àª°",
    goa: "àª—à«‹àªµàª¾",
  },
  tamil: {
    "uttar-pradesh": "uttar pradesh",
    punjab: "punjab",
    uttarakhand: "uttarakhand",
    goa: "goa",
    manipur: "manipur",
  },
  telugu: {
    "uttar-pradesh": "uttar pradesh",
    punjab: "punjab",
    uttarakhand: "uttarakhand",
    goa: "goa",
    manipur: "manipur",
  },
  malayalam: {
    "uttar-pradesh": "uttar pradesh",
    punjab: "punjab",
    uttarakhand: "uttarakhand",
    goa: "goa",
    manipur: "manipur",
  },
  assam: {
    "uttar-pradesh": "à¦‰à¦¤à§à¦¤à§° à¦ªà§à§°à¦¦à§‡à¦¶",
    punjab: "à¦ªà¦žà§à¦œà¦¾à§±",
    uttarakhand: "à¦‰à¦¤à§à¦¤à§°à¦¾à¦–à¦£à§à¦¡",
    manipur: "à¦®à¦£à¦¿à¦ªà§à§°",
    goa: "à¦—à§‹à§±à¦¾",
  },
  urdu: {
    "uttar-pradesh": "uttar pradesh",
    punjab: "punjab",
    uttarakhand: "uttarakhand",
    goa: "goa",
    manipur: "manipur",
  },
  odia: {
    "uttar-pradesh": "uttar pradesh",
    punjab: "punjab",
    uttarakhand: "uttarakhand",
    goa: "goa",
    manipur: "manipur",
  },
  kannada: {
    "uttar-pradesh": "uttar pradesh",
    punjab: "punjab",
    uttarakhand: "uttarakhand",
    goa: "goa",
    manipur: "manipur",
  },
};

let stateAbbr = {
  "uttar-pradesh": "UP",
  punjab: "PB",
  uttarakhand: "UK",
  goa: "GA",
  manipur: "MN",
};

let langType = "english",
  allianceHead1 = "ASSEMBLY ELECTIONS 2022",
  allianceHead2 = "seats",
  allianceHead3 = "seats to win",
  allianceLang = "Alliance",
  partyLang = "Party",
  winLeadLang = "Wins + Leads",
  strikeRateLang = "Strike Rate*",
  strikeRateStarLang = "*Percentage of wins/leads over contested seats",
  resultTallyLang = "Result Tally",
  keyCandName = "cand_name",
  keyConsName = "cons_name",
  awaitLang = "AWAITED",
  winsLang = "WINS ",
  leadingLang = "LEADING",
  lossLang = "LOSES",
  trailingLang = "TRAILING",
  consNameLableLang = "Cons. Name";

let env = "live",
  url_env = "live",
  switch_url = "",
  apiForLiveblog = "";

let switch_key = "assembly-elections";
let hostLocation = location.host;
// let hostLocation = "www.news18.com";
let hrefLocation = location.href;
// let hrefLocation = "https://www.news18.com/?utm_source=Jio&utm_medium=referral&utm_campaign=news18lang_widget_click&comscorekw=JioXpress";
if (hostLocation.search("stg") >= 0) {
  env = "stg";
  url_env = "beta";
  switch_url = "?new_framework=true&h";
} else if (hostLocation.search("betav1") >= 0) {
  env = "betav1";
  url_env = "beta";
  switch_url = "?new_framework=publickeytrue&h";
} else if (hostLocation.search("beta") >= 0) {
  env = "beta";
  url_env = "beta";
  switch_url = "?new_framework=publickeytrue&h";
}
var switchUrlAssembly = `https://election.nw18.com/electiondata/electionjson/assembly_election_2022/${url_env}/switchdata.json`;

if (
  hrefLocation.includes("assembly-elections") &&
  hrefLocation.search("amp") > 0
) {
  let queryParam = hrefLocation.split("?")[1];
  langType = queryParam.substring(0, queryParam.indexOf("#"));
} else {
  let hostlangtype = hrefLocation.split("://")[1];
  langType = hostlangtype
    .substring(0, hostlangtype.indexOf("."))
    .replace("stg", "")
    .replace("betav1", "")
    .replace("beta", "");
  if (langType == "" || langType == "www" || langType == "news18") {
    langType = "english";
  }
}

if (
  [
    "stg.news18.com",
    "beta.news18.com",
    "betav1.news18.com",
    "www.news18.com",
    "news18.com",
  ].includes(hostLocation)
) {
  switch_key = "assembly-elections-2022";
}
let counting_swither_key = "site_switcher_widget_assembly_election_2022";
apiForLiveblog =
  env != "live"
    ? `https://${env}${langType}.news18.com/nodeapi/data/${counting_swither_key}`
    : `https://${langType}.news18.com/nodeapi/data/${counting_swither_key}`;
if (langType == "english") {
  apiForLiveblog = "";
  switch_key = "assembly-elections-2022";
}

console.log("langType", [langType, apiForLiveblog, env, url_env]);

if (hostLocation.indexOf(langType) >= 0) {
  // langType = 'hindi',
  if (langType == "hindi") {
    (apiForLiveblog = ""),
      (resultTallyLang = "à¤ªà¤°à¤¿à¤£à¤¾à¤®"),
      (allianceHead1 = "à¤µà¤¿à¤§à¤¾à¤¨à¤¸à¤­à¤¾ à¤šà¥à¤¨à¤¾à¤µ 2022"),
      (allianceHead2 = "à¤¸à¥€à¤Ÿà¥‡à¤‚"),
      (allianceHead3 = "à¤¸à¥€à¤Ÿ à¤¬à¤¹à¥à¤®à¤¤ à¤•à¥‡ à¤²à¤¿à¤"),
      (allianceLang = "à¤—à¤ à¤¬à¤‚à¤§à¤¨"),
      (partyLang = "à¤ªà¤¾à¤°à¥à¤Ÿà¥€"),
      (winLeadLang = "à¤œà¥€à¤¤ + à¤¬à¤¢à¤¼à¤¤"),
      (strikeRateLang = "à¤¸à¥à¤Ÿà¥à¤°à¤¾à¤‡à¤• à¤°à¥‡à¤Ÿ*"),
      (strikeRateStarLang =
        "*à¤²à¤¡à¤¼à¥€ à¤—à¤ˆ à¤¸à¥€à¤Ÿà¥‹à¤‚ à¤ªà¤° à¤œà¥€à¤¤/à¤¬à¤¢à¤¼à¤¤ à¤•à¤¾ à¤ªà¥à¤°à¤¤à¤¿à¤¶à¤¤"),
      (keyCandName = "candidate_name_hi"),
      (keyConsName = "cons_name_hindi"),
      (awaitLang = "à¤¨à¤¤à¥€à¤œà¥‡ à¤¬à¤¾à¤•à¥€"),
      (winsLang = "à¤µà¤¿à¤œà¤¯à¥€ "),
      (leadingLang = "à¤†à¤—à¥‡"),
      (lossLang = "à¤ªà¤°à¤¾à¤œà¤¿à¤¤"),
      (trailingLang = "à¤ªà¥€à¤›à¥‡"),
      (consNameLableLang = "à¤¸à¥€à¤Ÿ à¤•à¤¾ à¤¨à¤¾à¤®");
  } else if (langType == "punjab" || langType == "punjabi") {
    (apiForLiveblog = ""),
      (langType = "punjab"),
      (resultTallyLang = "à¨°à¨¿à©›à¨²à¨Ÿ à¨Ÿà©ˆà¨²à©€"),
      (allianceHead1 = "à¨µà¨¿à¨§à¨¾à¨¨à¨¸à¨­à¨¾ à¨šà©‹à¨£à¨¾à¨‚ 2022"),
      (allianceHead2 = "à¨¸à©€à¨Ÿà¨¾à¨‚"),
      (allianceHead3 = "à¨œà¨¿à©±à¨¤ à¨²à¨ˆ à©›à¨°à©‚à¨°à©€ à¨¸à©€à¨Ÿà¨¾à¨‚"),
      (allianceLang = "à¨—à¨ à¨œà©‹à©œ"),
      (partyLang = "à¨ªà¨¾à¨°à¨Ÿà©€"),
      (winLeadLang = "à¨œà¨¿à©±à¨¤ + à¨²à©€à¨¡"),
      (strikeRateLang = "à¨¸à¨Ÿà©à¨°à¨¾à¨ˆà¨• à¨°à©‡à¨Ÿ*"),
      (strikeRateStarLang =
        "*à¨²à©œà©€à¨†à¨‚ à¨—à¨ˆà¨†à¨‚ à¨¸à©€à¨Ÿà¨¾à¨‚ `à¨¤à©‡ à¨œà¨¿à©±à¨¤/à¨²à©€à¨¡ à¨¦à¨¾ à¨•à©à©±à¨² à¨ªà©à¨°à¨¤à©€à¨¶à¨¤"),
      (keyCandName = "CANDINAME_PUNJABI"),
      (keyConsName = "cons_name_punjabi"),
      (awaitLang = "à¨¨à¨¤à©€à¨œà©‡ à¨¦à©€ à¨‰à¨¡à©€à¨• à¨¹à©ˆ"),
      (winsLang = "à¨œà¨¿à©±à¨¤ "),
      (leadingLang = "à¨…à©±à¨—à©‡"),
      (lossLang = "à¨¹à¨¾à¨°"),
      (trailingLang = "à¨ªà¨¿à©±à¨›à©‡"),
      (consNameLableLang = "à¨µà¨¿à¨§à¨¾à¨¨à¨¸à¨­à¨¾ à¨¨à¨¾à¨‚à¨…");
  } else if (langType == "bengali") {
    (switch_key = "assembly-elections-2022"),
      (allianceHead1 =
        "à¦¬à¦¿à¦§à¦¾à¦¨à¦¸à¦­à¦¾ à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à§¨à§¦à§¨à§¨"),
      (allianceHead2 = "à¦†à¦¸à¦¨"),
      (allianceHead3 = "à¦œà¦¯à¦¼à§‡à¦° à¦œà¦¨à§à¦¯ à¦†à¦¸à¦¨ à¦¦à¦°à¦•à¦¾à¦°");
  } else if (langType == "lokmat") {
    (switch_key = "assembly-elections-2022"),
      (resultTallyLang = "à¤°à¤¿à¤à¤²à¥à¤Ÿ"),
      (allianceHead1 = "à¤µà¤¿à¤§à¤¾à¤¨à¤¸à¤­à¤¾ à¤¨à¤¿à¤µà¤¡à¤£à¥‚à¤• 2022"),
      (allianceHead2 = "à¤¸à¥€à¤Ÿà¥à¤¸"),
      (allianceHead3 = "à¤µà¤¿à¤œà¤¯à¤¾à¤¸à¤¾à¤ à¥€ à¤¸à¥€à¤Ÿà¥à¤¸"),
      (keyCandName = "CAND_NAME_MARATHI"),
      (keyConsName = "CONS_NAME_MARATHI");
  } else if (langType == "gujarati") {
    (switch_key = "assembly-elections-2022"),
      (allianceHead1 = "àªµàª¿àª§àª¾àª¨àª¸àª­àª¾ àªšà«‚àª‚àªŸàª£à«€ 2022"),
      (allianceHead2 = "àª¬à«‡àª àª•à«‹"),
      (allianceHead3 =
        "àªœà«€àª¤ àª®àª¾àªŸà«‡ àªœàª°à«‚àª°à«€ àª¬à«‡àª àª•à«‹");
  } else if (langType == "kannada") {
    switch_key = "assembly-elections-2022";
    // allianceHead1 = "à²µà²¿à²§à²¾à²¨à²¸à²­à²¾ à²šà³à²¨à²¾à²µà²£à³† 2022",
    // allianceHead2 = "à²†à²¸à²¨à²—à²³à³",
    // allianceHead3 = "à²—à³†à²²à³à²²à²²à³ à²¸à³à²¥à²¾à²¨à²—à²³à³"
  } else if (langType == "tamil") {
    switch_key = "assembly-elections-2022";
    // allianceHead1 = "à®šà®Ÿà¯à®Ÿà®®à®©à¯à®± à®¤à¯‡à®°à¯à®¤à®²à¯ 2022",
    // allianceHead2 = "à®¤à¯Šà®•à¯à®¤à®¿à®•à®³à¯",
    // allianceHead3 = "à®µà¯†à®±à¯à®±à®¿à®ªà¯ à®ªà¯†à®± à®µà¯‡à®£à¯à®Ÿà®¿à®¯ à®¤à¯Šà®•à¯à®¤à®¿à®•à®³à¯"
  } else if (langType == "telugu") {
    switch_key = "assembly-elections-2022";
    // allianceHead1 = "à°…à°¸à±†à°‚à°¬à±à°²à±€ à°Žà°¨à±à°¨à°¿à°•à°²à± 2022",
    // allianceHead2 = "à°¸à±€à°Ÿà±à°²à±",
    // allianceHead3 = "à°µà°¿à°œà°¯à°¾à°¨à°¿à°•à°¿ à°•à°¾à°µà°¾à°²à±à°¸à°¿à°¨ à°¸à±€à°Ÿà±à°²à±"
  } else if (langType == "malayalam") {
    switch_key = "assembly-elections-2022";
    // allianceHead1 = "à´¨à´¿à´¯à´®à´¸à´­à´¾ à´¤àµ†à´°à´žàµà´žàµ†à´Ÿàµà´ªàµà´ªàµ 2022",
    // allianceHead2 = "à´¸àµ€à´±àµà´±àµà´•àµ¾",
    // allianceHead3 = "à´œà´¯à´¿à´•àµà´•à´¾à´¨à´¾à´¯à´¿ à´µàµ‡à´£àµà´Ÿ à´¸àµ€à´±àµà´±àµà´•àµ¾"
  } else if (langType == "assam") {
    (switch_key = "assembly-elections-2022"),
      (allianceHead1 =
        "à¦¬à¦¿à¦§à¦¾à¦¨à¦¸à¦­à¦¾ à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨ à§¨à§¦à§¨à§¨"),
      (allianceHead2 = "à¦†à¦¸à¦¨"),
      (allianceHead3 =
        "à¦œà§Ÿà§€ à¦¹â€™à¦¬à¦²à§ˆ à¦¦à§°à¦•à¦¾à§°à§€ à¦†à¦¸à¦¨");
  } else if (langType == "odia") {
    switch_key = "assembly-elections-2022";
    // allianceHead1 = "à¬¬à¬¿à¬§à¬¾à¬¨à¬¸à¬­à¬¾ à¬¨à¬¿à¬°à­à¬¬à¬¾à¬šà¬¨ à­¨à­¦à­¨à­¨",
    // allianceHead2 = "à¬†à¬¸à¬¨à¬—à­à¬¡à¬¿à¬• |",
    // allianceHead3 = "à¬œà¬¿à¬¤à¬¿à¬¬à¬¾ à¬ªà¬¾à¬‡à¬ à¬†à¬¸à¬¨ à¬†à¬¬à¬¶à­à­Ÿà¬• |"
  } else if (langType == "urdu") {
    switch_key = "assembly-elections-2022";
    // allianceHead1 = "Ø§Ø³Ù…Ø¨Ù„ÛŒ Ø§Ù†ØªØ®Ø§Ø¨Ø§Øª 2022",
    // allianceHead2 = "Ø³ÛŒÙ¹ÛŒÚº",
    // allianceHead3 = "Ø¬ÛŒØªÙ†Û’ Ú©ÛŒÙ„Ø¦Û’ Ø³ÛŒÙ¹ÛŒÚº"
  }
}

// Get Election Json URL'S From Switcher Json;
var _glide = "";
function _get_election_json_url_assembly_list() {
  var callBackForAssemblySwitchURL = "switchdata_assembly_election_2022";
  var jsonUrl = switchUrlAssembly;
  _jsonp.send(jsonUrl, {
    callbackName: callBackForAssemblySwitchURL,
    onSuccess: function (response) {
      var data = response;
      // console.log("data ... ", data, jsonUrl)
      if (data) {
        var assemblyJsonPath = data.seat_party_summary_all;
        var asElectionConstPath = data.cons_list_with_status;
        var asElectionConstPathAll = data.cons_list_with_status_all;
        var asElectionKeyCandPath = data.key_candidates_cross_all;
        var _byPollJsonPath = data.by_poll_party_summary_cross;
        if (document.querySelector(".alliace-tally-homepage")) {
          _get_assembly_election_results_opt(assemblyJsonPath);
          _get_assembly_election_key_candidate(asElectionKeyCandPath);
          _get_assembly_election_cons_home_slider(asElectionConstPathAll);

          _get_assembly_election_cons_rhs(asElectionConstPath, "uttar-pradesh");
          _get_assembly_election_cons_rhs(asElectionConstPath, "punjab");
          _get_assembly_election_cons_rhs(asElectionConstPath, "uttarakhand");
          _get_assembly_election_cons_rhs(asElectionConstPath, "goa");
          _get_assembly_election_cons_rhs(asElectionConstPath, "manipur");
        }
        if (document.querySelector(".election_day_widget_acr")) {
          _get_assembly_election_results_opt(assemblyJsonPath);
          if (typeof _fState !== "undefined") {
            if (_fState != "") {
              _get_assembly_election_cons_rhs_f(asElectionConstPath, _fState);
            } else {
              _rhsCalling(asElectionConstPath);
            }
          } else {
            _rhsCalling(asElectionConstPath);
          }
        }
        if (document.querySelector(".constResultWrap .tableWrap")) {
          _rhsCalling(asElectionConstPath);
        }
      }
    },
    onTimeout: function () {
      console.log("timeout!");
    },
    timeout: 50,
  });
}
function _get_election_json_url_assembly_list_mapclick(_stFor) {
  // _stFor = _stFor.replace("-","",_stFor);

  var callBackForAssemblySwitchURL = "switchdata_assembly_election_2022";
  var jsonUrl = switchUrlAssembly;
  _jsonp.send(jsonUrl, {
    callbackName: callBackForAssemblySwitchURL,
    onSuccess: function (response) {
      var data = response;
      if (data) {
        var asElectionConstPath = data.cons_list_with_status;
        _get_assembly_election_cons_rhs(asElectionConstPath, _stFor);
      }
    },
    onTimeout: function () {
      console.log("timeout!");
    },
    timeout: 50,
  });
}

// get assembly election data from optimized json
async function _get_assembly_election_results_opt(jsonUrl) {
  var _jsonAssemblyElectionURL = jsonUrl;
  var _callbackAssemblyName = "election_assembly_2022_all";

  let liveBlogForLangUrl = "";
  if (apiForLiveblog != "") {
    let liveBlogForLangData = await fetch(apiForLiveblog);
    liveBlogForLangData = await liveBlogForLangData.json();

    if (liveBlogForLangData?.data?.site_switcher_widget_assembly_election) {
      liveBlogForLangUrl =
        liveBlogForLangData?.data?.site_switcher_widget_assembly_election
          ?.story_url || "";
    }
  }

  let get_opt_json_url = await fetch(
    "https://election.nw18.com/electiondata/electionjson/assembly_election_2022_optimization/live/etv/dynamic/seat_party_summary.json"
  );
  let response = await get_opt_json_url.json();
  // console.log("opt json data .... ", response)

  // onSuccess: function (response) {
  if (!response || !Object.keys(response).length) {
    return false;
  }
  let newresObject = response;
  if (langType == "punjab") {
    newresObject = {
      punjab: response.punjab,
      "uttar-pradesh": response["uttar-pradesh"],
      uttarakhand: response.uttarakhand,
      goa: response.goa,
      manipur: response.manipur,
    };
  }
  if (langType == "lokmat") {
    newresObject = {
      goa: response.goa,
      "uttar-pradesh": response["uttar-pradesh"],
      uttarakhand: response.uttarakhand,
      punjab: response.punjab,
      manipur: response.manipur,
    };
  }
  if (langType == "assam") {
    newresObject = {
      manipur: response.manipur,
      "uttar-pradesh": response["uttar-pradesh"],
      uttarakhand: response.uttarakhand,
      goa: response.goa,
      punjab: response.punjab,
    };
  }
  if (langType == "hindi" || langType == "english") {
    newresObject = {
      "uttar-pradesh": response["uttar-pradesh"],
      punjab: response.punjab,
      uttarakhand: response.uttarakhand,
      manipur: response.manipur,
      goa: response.goa,
    };
  }

  if (newresObject != "" || Object.keys(newresObject).length > 0) {
    var _asResultListing = "";
    var _asPartyListing = "";
    var _detailResult = "";
    var _asCnt = 0;
    var _acrossWidget = "";
    Object.keys(newresObject).forEach(function (v, key) {
      //Object.keys(response[v]).forEach(function (value,key){
      var _asAllianceData = newresObject[v].alliance;
      var _asPartyData = newresObject[v].party;
      var _asArrTotalSeats = newresObject[v].total_seats;
      var wonlead =
        _asArrTotalSeats.wonlead != "" ? _asArrTotalSeats.wonlead : 0;
      var _asTotalSeats = _asArrTotalSeats
        ? parseInt(_asArrTotalSeats.seats)
        : "";
      var _asNeedToWon = _asTotalSeats ? parseInt(_asTotalSeats / 2) + 1 : "";
      var _asAllianceLength = _asAllianceData.length;

      var _progressBar = "";
      var _allianceNames = "";
      var _allianceResults = "";
      var _allianceOldResults = "";
      var _mapAllianceNames = "";
      var _mapAllianceResults = "";
      var _allianceWonLead = "";
      var _allianceSR = "";
      var _pgBar = "";
      var _firstPartyTowinText = "";
      var _secondPartyTowinText = "";
      var _allianceAcrossWL = "";

      _asAllianceData.forEach(function (value, key) {
        if (key < 5) {
          var _spercentage = (parseInt(value.wonlead) / _asTotalSeats) * 100;
          let total_candidate =
            value?.total_candidate != "" ? value.total_candidate : 0;
          var _strikePercentage =
            (parseInt(value.wonlead) / parseInt(total_candidate)) * 100;
          if (total_candidate == 0) {
            _strikePercentage = 0;
          }
          var _strikePercentageCheck = isNaN(_strikePercentage)
            ? 0
            : _strikePercentage;
          // var _scolor = value.color ? value.color : "#1d1d1d";
          var _scolor =
            value.display_name && party_color_code[value.display_name]
              ? party_color_code[value.display_name]
              : "#1d1d1d";
          _progressBar +=
            '<span style="width:' +
            _spercentage +
            "%; background:" +
            _scolor +
            '"></span>';
          _allianceNames +=
            '<th style="background:' +
            _scolor +
            '">' +
            value.display_name +
            "</th>";
          _allianceWonLead +=
            '<td style="background:' +
            _scolor +
            '"><div class="tally-tablebox"><div class="box-inner">' +
            value.wonlead +
            '</div><div class="box-inner">' +
            value.won +
            " <span>wins</span></div></div></td>";
          _allianceAcrossWL +=
            '<td style="background:' + _scolor + '">' + value.wonlead + "</td>";
          _mapAllianceNames +=
            '<td class="ne-hmmpprt" style="background:' +
            _scolor +
            '">' +
            value.display_name +
            "</td>";
          _allianceResults +=
            '<td style="background:' + _scolor + '">' + value.wonlead + "</td>";
          _mapAllianceResults +=
            '<td style="background:' + _scolor + '">' + value.wonlead + "</td>";
          let _changes = value.changes;
          if (typeof value.changes !== "undefined") {
            if (parseInt(value.changes) > 0) {
              _changes = "+" + value.changes;
            }
          }
          _allianceOldResults += "<td>" + _changes + "</td>";
          if (value.display_name.toLowerCase() == "oth") {
            _allianceSR += "<td>-</td>";
          } else {
            _allianceSR +=
              "<td>" +
              Math.round(_strikePercentageCheck) +
              "% (" +
              value.wonlead +
              "/" +
              total_candidate +
              ")</td>";
          }
        }
      });
      var _progressBarParty = "";
      var _partyNames = "";
      var _partyResults = "";
      var _partyOldResults = "";
      var _partySR = "";

      _asPartyData.forEach(function (value, key) {
        if (key < 8) {
          var _spercentage = (parseInt(value.wonlead) / _asTotalSeats) * 100;
          let total_candidate =
            value?.total_candidate != "" ? value.total_candidate : 0;
          var _strikePercentage =
            (parseInt(value.wonlead) / parseInt(total_candidate)) * 100;
          if (total_candidate == 0) {
            _strikePercentage = 0;
          }
          var _strikePercentageCheck = isNaN(_strikePercentage)
            ? 0
            : _strikePercentage;
          var _scolor =
            value.name && party_color_code[value.name]
              ? party_color_code[value.name]
              : "#1d1d1d";
          // var _scolor = value.color ? value.color : "#1d1d1d";
          _progressBarParty +=
            '<span style="width:' +
            _spercentage +
            "%; background:" +
            _scolor +
            '"></span>';
          _partyNames +=
            '<th style="background:' + _scolor + '">' + value.name + "</th>";
          _partyResults +=
            '<td style="background:' +
            _scolor +
            '; color:#fff">' +
            value.wonlead +
            "</td>";
          let _changes = value.changes;
          if (typeof value.changes !== "undefined") {
            if (parseInt(value.changes) > 0) {
              _changes = "+" + value.changes;
            }
          }
          _partyOldResults += "<td>" + _changes + "</td>";
          if (value.name.toLowerCase() == "oth") {
            _partySR += "<td>-</td>";
          } else {
            _partySR +=
              "<td>" +
              Math.round(_strikePercentageCheck) +
              "% (" +
              value.wonlead +
              "/" +
              total_candidate +
              ")</td>";
          }

          var _classForAss = key == 0 ? 'class="forwinner"' : "";
        }
      });

      //new start

      var _stateName = v.replace("-", " ");
      var _extraLine = "";
      if (_asCnt == 4) {
        _extraLine =
          '<div class="allianceTableftr">' + strikeRateStarLang + "</div>";
      }
      let stateClickLink = "/" + switch_key + "/" + v + "/" + switch_url;
      let partyAllianceLinks =
        "/" +
        switch_key +
        "/" +
        v +
        "/alliance-wise-tally-results/" +
        switch_url;
      let acrossclickLink = "/" + switch_key + "/" + v + "/" + switch_url;

      let liveBlogForLangWidgetUrl =
        liveBlogForLangUrl != "" ? liveBlogForLangUrl : acrossclickLink;
      let liveBlogForLangTallyWidgetUrl =
        liveBlogForLangUrl != "" ? liveBlogForLangUrl : partyAllianceLinks;

      if (langType == "lokmat") {
        if (v == "goa") {
          liveBlogForLangWidgetUrl = acrossclickLink;
        } else {
          stateClickLink = liveBlogForLangUrl;
        }
      }
      if (
        langType == "tamil" ||
        langType == "bengali" ||
        langType == "telugu"
      ) {
        stateClickLink = liveBlogForLangUrl;
      }

      // console.log("langtype + state: ", [langType, v, liveBlogForLangWidgetUrl, liveBlogForLangTallyWidgetUrl])

      _asResultListing +=
        '<div class="allianceTableSec"><div class="allianceTableHead"><h2 class="allianceHead-1"><a href="' +
        stateClickLink +
        '"><span>' +
        stateArr[langType][v] +
        "</span></a> " +
        resultTallyLang +
        '</h2><h3 class="allianceHead-2"><span>' +
        wonlead +
        "</span> /" +
        _asTotalSeats +
        " " +
        allianceHead2 +
        '</h3><p class="allianceHead-3">(' +
        _asNeedToWon +
        " " +
        allianceHead3 +
        ')</p></div><div class="brcountday-tallywidget-table"><a href="' +
        liveBlogForLangTallyWidgetUrl +
        '" style="position:absolute; height:100%; width:100%; display:block; z-index:999;"></a><table cellpadding="0" cellspacing="0"><tbody><tr><th>' +
        allianceLang +
        "</th>" +
        _allianceNames +
        "</tr><tr><td>" +
        winLeadLang +
        "</td>" +
        _allianceWonLead +
        "</tr><tr><td>+/- 2017</td>" +
        _allianceOldResults +
        "</tr><tr><td>" +
        strikeRateLang +
        "</td>" +
        _allianceSR +
        '</tr></tbody></table><div class="brcountday-tallywidget-right"></div></div>' +
        _extraLine +
        "</div>";

      _asPartyListing +=
        '<div class="allianceTableSec"><div class="allianceTableHead"><h2 class="allianceHead-1"><a href="' +
        stateClickLink +
        '"><span>' +
        stateArr[langType][v] +
        "</span></a> " +
        resultTallyLang +
        '</h2><h3 class="allianceHead-2"><span>' +
        wonlead +
        "</span> /" +
        _asTotalSeats +
        " " +
        allianceHead2 +
        '</h3><p class="allianceHead-3">(' +
        _asNeedToWon +
        " " +
        allianceHead3 +
        ')</p></div><div class="brcountday-tallywidget-table"><a href="' +
        liveBlogForLangTallyWidgetUrl +
        '" style="position:absolute; height:100%; width:100%; display:block; z-index:999;"></a><table cellpadding="0" cellspacing="0"><tbody><tr><th>' +
        partyLang +
        "</th>" +
        _partyNames +
        "</tr><tr><td>" +
        winLeadLang +
        "</td>" +
        _partyResults +
        "</tr><tr><td>+/- 2017</td>" +
        _partyOldResults +
        "</tr><tr><td>" +
        strikeRateLang +
        "</td>" +
        _partySR +
        '</tr></tbody></table><div class="brcountday-tallywidget-right"></div></div>' +
        _extraLine +
        "</div>";
      //new end

      _acrossWidget +=
        '<div class="election-tallywidget-table" onclick="acrossclick(\'' +
        liveBlogForLangWidgetUrl +
        '\')"><div class="tallywidget-table-top"><p class="table-top-title">' +
        stateArr[langType][v] +
        " <span>" +
        allianceHead1 +
        '</span></p><p class="table-top-seats">' +
        wonlead +
        "<sub>/" +
        _asTotalSeats +
        " " +
        allianceHead2 +
        "</sub> <span>(" +
        _asNeedToWon +
        " " +
        allianceHead3 +
        ')</span></p></div><div style="position:relative"><table cellpadding="0" cellspacing="0"><tbody><tr><th>' +
        allianceLang +
        "</th>" +
        _allianceNames +
        "</tr><tr><td>" +
        winLeadLang +
        "</td>" +
        _allianceAcrossWL +
        "</tr><tr><td>+/- 2017</td>" +
        _allianceOldResults +
        '</tr></tbody></table><div class="brcountday-tallywidget-right"></div></div><div class="for_mobile_seats"><p class="seats_no">' +
        wonlead +
        "<span>/" +
        _asTotalSeats +
        " " +
        allianceHead2 +
        '</span></p><p class="seats_win">(' +
        _asNeedToWon +
        " " +
        allianceHead3 +
        ")</p></div></div>";

      var _mapWidgetListing = "";
      _mapWidgetListing +=
        "<tbody><tr>" +
        _mapAllianceNames +
        "</tr><tr>" +
        _mapAllianceResults +
        "</tr></tbody>";

      if (document.querySelector(".svgtable-" + v)) {
        document.querySelector(".svgtable-" + v).innerHTML = _mapWidgetListing;
      }

      _detailResult =
        '<div class="AllianceTally tab-content tab-content-f">' +
        _asResultListing +
        '</div><div class="PartyTally tab-content hide tab-content-f"> ' +
        _asPartyListing +
        "</div>";
      _asCnt++;
      //})
    });

    if (document.querySelector(".alliace-tally-homepage")) {
      document.querySelector(".alliace-tally-homepage").innerHTML =
        _detailResult;
    }
    if (document.querySelector(".election_day_widget_acr")) {
      document.querySelector(".election_day_widget_acr").innerHTML =
        '<div data-glide-el="track"><div class="glide__slides">' +
        _acrossWidget +
        '</div><div class="glide__bullets" data-glide-el="controls[nav]"><button class="glide__bullet" data-glide-dir="=0"></button><button class="glide__bullet" data-glide-dir="=1"></button><button class="glide__bullet" data-glide-dir="=2"></button><button class="glide__bullet" data-glide-dir="=3"></button> <button class="glide__bullet" data-glide-dir="=4"></button></div></div>';
      new Glide(document.querySelector(".widget_row_election"), {
        type: "carousel",
        perView: 2,
        gap: 20,
        slidesToShow: 2,
        dots: "#dots",
        autoplay: 2000,
        draggable: true,
        breakpoints: { 767: { perView: 1, gap: 10, slidesToShow: 1 } },
      }).mount();
      // getapi("https://stgurdu.news18.com/nodeapi/data/site_switcher_widget_assembly_election_2022");
    }
  }
  // }

  // _jsonp.send(_jsonAssemblyElectionURL, {
  //   callbackName: _callbackAssemblyName,
  //   ,
  //   onTimeout: function () {
  //     console.log("timeout!");
  //   },
  //   timeout: 50,
  // });
}

// Get Assembly Election Results Data ;
async function _get_assembly_election_results(jsonUrl) {
  var _jsonAssemblyElectionURL = jsonUrl;
  var _callbackAssemblyName = "election_assembly_2022_all";

  let liveBlogForLangUrl = "";
  if (apiForLiveblog != "") {
    let liveBlogForLangData = await fetch(apiForLiveblog);
    liveBlogForLangData = await liveBlogForLangData.json();

    if (liveBlogForLangData?.data?.site_switcher_widget_assembly_election) {
      liveBlogForLangUrl =
        liveBlogForLangData?.data?.site_switcher_widget_assembly_election
          ?.story_url || "";
    }
  }

  _jsonp.send(_jsonAssemblyElectionURL, {
    callbackName: _callbackAssemblyName,
    onSuccess: function (response) {
      if (!response || !Object.keys(response).length) {
        return false;
      }
      let newresObject = response;
      if (langType == "punjab") {
        newresObject = {
          punjab: response.punjab,
          "uttar-pradesh": response["uttar-pradesh"],
          uttarakhand: response.uttarakhand,
          goa: response.goa,
          manipur: response.manipur,
        };
      }
      if (langType == "lokmat") {
        newresObject = {
          goa: response.goa,
          "uttar-pradesh": response["uttar-pradesh"],
          uttarakhand: response.uttarakhand,
          punjab: response.punjab,
          manipur: response.manipur,
        };
      }
      if (langType == "assam") {
        newresObject = {
          manipur: response.manipur,
          "uttar-pradesh": response["uttar-pradesh"],
          uttarakhand: response.uttarakhand,
          goa: response.goa,
          punjab: response.punjab,
        };
      }
      if (langType == "hindi" || langType == "english") {
        newresObject = {
          "uttar-pradesh": response["uttar-pradesh"],
          punjab: response.punjab,
          uttarakhand: response.uttarakhand,
          manipur: response.manipur,
          goa: response.goa,
        };
      }

      if (newresObject != "" || Object.keys(newresObject).length > 0) {
        var _asResultListing = "";
        var _asPartyListing = "";
        var _detailResult = "";
        var _asCnt = 0;
        var _acrossWidget = "";
        Object.keys(newresObject).forEach(function (v, key) {
          //Object.keys(response[v]).forEach(function (value,key){
          var _asAllianceData = newresObject[v].alliance;
          var _asPartyData = newresObject[v].party;
          var _asArrTotalSeats = newresObject[v].total_seats;
          var wonlead =
            _asArrTotalSeats.wonlead != "" ? _asArrTotalSeats.wonlead : 0;
          var _asTotalSeats = _asArrTotalSeats
            ? parseInt(_asArrTotalSeats.seats)
            : "";
          var _asNeedToWon = _asTotalSeats
            ? parseInt(_asTotalSeats / 2) + 1
            : "";
          var _asAllianceLength = _asAllianceData.length;

          var _progressBar = "";
          var _allianceNames = "";
          var _allianceResults = "";
          var _allianceOldResults = "";
          var _mapAllianceNames = "";
          var _mapAllianceResults = "";
          var _allianceWonLead = "";
          var _allianceSR = "";
          var _pgBar = "";
          var _firstPartyTowinText = "";
          var _secondPartyTowinText = "";
          var _allianceAcrossWL = "";

          _asAllianceData.forEach(function (value, key) {
            if (key < 5) {
              var _spercentage =
                (parseInt(value.wonlead) / _asTotalSeats) * 100;
              let total_candidate =
                value?.total_candidate != "" ? value.total_candidate : 0;
              var _strikePercentage =
                (parseInt(value.wonlead) / parseInt(total_candidate)) * 100;
              if (total_candidate == 0) {
                _strikePercentage = 0;
              }
              var _strikePercentageCheck = isNaN(_strikePercentage)
                ? 0
                : _strikePercentage;
              var _scolor = value.color ? value.color : "#1d1d1d";
              _progressBar +=
                '<span style="width:' +
                _spercentage +
                "%; background:" +
                _scolor +
                '"></span>';
              _allianceNames +=
                '<th style="background:' +
                _scolor +
                '">' +
                value.display_name +
                "</th>";
              _allianceWonLead +=
                '<td style="background:' +
                _scolor +
                '"><div class="tally-tablebox"><div class="box-inner">' +
                value.wonlead +
                '</div><div class="box-inner">' +
                value.won +
                " <span>wins</span></div></div></td>";
              _allianceAcrossWL +=
                '<td style="background:' +
                _scolor +
                '">' +
                value.wonlead +
                "</td>";
              _mapAllianceNames +=
                '<td class="ne-hmmpprt" style="background:' +
                _scolor +
                '">' +
                value.display_name +
                "</td>";
              _allianceResults +=
                '<td style="background:' +
                _scolor +
                '">' +
                value.wonlead +
                "</td>";
              _mapAllianceResults +=
                '<td style="background:' +
                _scolor +
                '">' +
                value.wonlead +
                "</td>";
              let _changes = value.changes;
              if (typeof value.changes !== "undefined") {
                if (parseInt(value.changes) > 0) {
                  _changes = "+" + value.changes;
                }
              }
              _allianceOldResults += "<td>" + _changes + "</td>";
              if (value.display_name.toLowerCase() == "oth") {
                _allianceSR += "<td>-</td>";
              } else {
                _allianceSR +=
                  "<td>" +
                  Math.round(_strikePercentageCheck) +
                  "% (" +
                  value.wonlead +
                  "/" +
                  total_candidate +
                  ")</td>";
              }
            }
          });
          var _progressBarParty = "";
          var _partyNames = "";
          var _partyResults = "";
          var _partyOldResults = "";
          var _partySR = "";

          _asPartyData.forEach(function (value, key) {
            if (key < 8) {
              var _spercentage =
                (parseInt(value.wonlead) / _asTotalSeats) * 100;
              let total_candidate =
                value?.total_candidate != "" ? value.total_candidate : 0;
              var _strikePercentage =
                (parseInt(value.wonlead) / parseInt(total_candidate)) * 100;
              if (total_candidate == 0) {
                _strikePercentage = 0;
              }
              var _strikePercentageCheck = isNaN(_strikePercentage)
                ? 0
                : _strikePercentage;
              var _scolor = value.color ? value.color : "#1d1d1d";
              _progressBarParty +=
                '<span style="width:' +
                _spercentage +
                "%; background:" +
                _scolor +
                '"></span>';
              _partyNames +=
                '<th style="background:' +
                _scolor +
                '">' +
                value.name +
                "</th>";
              _partyResults +=
                '<td style="background:' +
                _scolor +
                '; color:#fff">' +
                value.wonlead +
                "</td>";
              let _changes = value.changes;
              if (typeof value.changes !== "undefined") {
                if (parseInt(value.changes) > 0) {
                  _changes = "+" + value.changes;
                }
              }
              _partyOldResults += "<td>" + _changes + "</td>";
              if (value.name.toLowerCase() == "oth") {
                _partySR += "<td>-</td>";
              } else {
                _partySR +=
                  "<td>" +
                  Math.round(_strikePercentageCheck) +
                  "% (" +
                  value.wonlead +
                  "/" +
                  total_candidate +
                  ")</td>";
              }

              var _classForAss = key == 0 ? 'class="forwinner"' : "";
            }
          });

          //new start

          var _stateName = v.replace("-", " ");
          var _extraLine = "";
          if (_asCnt == 4) {
            _extraLine =
              '<div class="allianceTableftr">' + strikeRateStarLang + "</div>";
          }
          let stateClickLink = "/" + switch_key + "/" + v + "/" + switch_url;
          let partyAllianceLinks =
            "/" +
            switch_key +
            "/" +
            v +
            "/alliance-wise-tally-results/" +
            switch_url;
          let acrossclickLink = "/" + switch_key + "/" + v + "/" + switch_url;

          let liveBlogForLangWidgetUrl =
            liveBlogForLangUrl != "" ? liveBlogForLangUrl : acrossclickLink;
          let liveBlogForLangTallyWidgetUrl =
            liveBlogForLangUrl != "" ? liveBlogForLangUrl : partyAllianceLinks;

          if (langType == "lokmat") {
            if (v == "goa") {
              liveBlogForLangWidgetUrl = acrossclickLink;
            } else {
              stateClickLink = liveBlogForLangUrl;
            }
          }
          if (
            langType == "tamil" ||
            langType == "bengali" ||
            langType == "telugu"
          ) {
            stateClickLink = liveBlogForLangUrl;
          }

          // console.log("langtype + state: ", [langType, v, liveBlogForLangWidgetUrl, liveBlogForLangTallyWidgetUrl])

          _asResultListing +=
            '<div class="allianceTableSec"><div class="allianceTableHead"><h2 class="allianceHead-1"><a href="' +
            stateClickLink +
            '"><span>' +
            stateArr[langType][v] +
            "</span></a> " +
            resultTallyLang +
            '</h2><h3 class="allianceHead-2"><span>' +
            wonlead +
            "</span> /" +
            _asTotalSeats +
            " " +
            allianceHead2 +
            '</h3><p class="allianceHead-3">(' +
            _asNeedToWon +
            " " +
            allianceHead3 +
            ')</p></div><div class="brcountday-tallywidget-table"><a href="' +
            liveBlogForLangTallyWidgetUrl +
            '" style="position:absolute; height:100%; width:100%; display:block; z-index:999;"></a><table cellpadding="0" cellspacing="0"><tbody><tr><th>' +
            allianceLang +
            "</th>" +
            _allianceNames +
            "</tr><tr><td>" +
            winLeadLang +
            "</td>" +
            _allianceWonLead +
            "</tr><tr><td>+/- 2017</td>" +
            _allianceOldResults +
            "</tr><tr><td>" +
            strikeRateLang +
            "</td>" +
            _allianceSR +
            '</tr></tbody></table><div class="brcountday-tallywidget-right"></div></div>' +
            _extraLine +
            "</div>";

          _asPartyListing +=
            '<div class="allianceTableSec"><div class="allianceTableHead"><h2 class="allianceHead-1"><a href="' +
            stateClickLink +
            '"><span>' +
            stateArr[langType][v] +
            "</span></a> " +
            resultTallyLang +
            '</h2><h3 class="allianceHead-2"><span>' +
            wonlead +
            "</span> /" +
            _asTotalSeats +
            " " +
            allianceHead2 +
            '</h3><p class="allianceHead-3">(' +
            _asNeedToWon +
            " " +
            allianceHead3 +
            ')</p></div><div class="brcountday-tallywidget-table"><a href="' +
            liveBlogForLangTallyWidgetUrl +
            '" style="position:absolute; height:100%; width:100%; display:block; z-index:999;"></a><table cellpadding="0" cellspacing="0"><tbody><tr><th>' +
            partyLang +
            "</th>" +
            _partyNames +
            "</tr><tr><td>" +
            winLeadLang +
            "</td>" +
            _partyResults +
            "</tr><tr><td>+/- 2017</td>" +
            _partyOldResults +
            "</tr><tr><td>" +
            strikeRateLang +
            "</td>" +
            _partySR +
            '</tr></tbody></table><div class="brcountday-tallywidget-right"></div></div>' +
            _extraLine +
            "</div>";
          //new end

          _acrossWidget +=
            '<div class="election-tallywidget-table" onclick="acrossclick(\'' +
            liveBlogForLangWidgetUrl +
            '\')"><div class="tallywidget-table-top"><p class="table-top-title">' +
            stateArr[langType][v] +
            " <span>" +
            allianceHead1 +
            '</span></p><p class="table-top-seats">' +
            wonlead +
            "<sub>/" +
            _asTotalSeats +
            " " +
            allianceHead2 +
            "</sub> <span>(" +
            _asNeedToWon +
            " " +
            allianceHead3 +
            ')</span></p></div><div style="position:relative"><table cellpadding="0" cellspacing="0"><tbody><tr><th>' +
            allianceLang +
            "</th>" +
            _allianceNames +
            "</tr><tr><td>" +
            winLeadLang +
            "</td>" +
            _allianceAcrossWL +
            "</tr><tr><td>+/- 2017</td>" +
            _allianceOldResults +
            '</tr></tbody></table><div class="brcountday-tallywidget-right"></div></div><div class="for_mobile_seats"><p class="seats_no">' +
            wonlead +
            "<span>/" +
            _asTotalSeats +
            " " +
            allianceHead2 +
            '</span></p><p class="seats_win">(' +
            _asNeedToWon +
            " " +
            allianceHead3 +
            ")</p></div></div>";

          var _mapWidgetListing = "";
          _mapWidgetListing +=
            "<tbody><tr>" +
            _mapAllianceNames +
            "</tr><tr>" +
            _mapAllianceResults +
            "</tr></tbody>";

          if (document.querySelector(".svgtable-" + v)) {
            document.querySelector(".svgtable-" + v).innerHTML =
              _mapWidgetListing;
          }

          _detailResult =
            '<div class="AllianceTally tab-content tab-content-f">' +
            _asResultListing +
            '</div><div class="PartyTally tab-content hide tab-content-f"> ' +
            _asPartyListing +
            "</div>";
          _asCnt++;
          //})
        });

        if (document.querySelector(".alliace-tally-homepage")) {
          document.querySelector(".alliace-tally-homepage").innerHTML =
            _detailResult;
        }
        if (document.querySelector(".election_day_widget_acr")) {
          document.querySelector(".election_day_widget_acr").innerHTML =
            '<div data-glide-el="track"><div class="glide__slides">' +
            _acrossWidget +
            '</div><div class="glide__bullets" data-glide-el="controls[nav]"><button class="glide__bullet" data-glide-dir="=0"></button><button class="glide__bullet" data-glide-dir="=1"></button><button class="glide__bullet" data-glide-dir="=2"></button><button class="glide__bullet" data-glide-dir="=3"></button> <button class="glide__bullet" data-glide-dir="=4"></button></div></div>';
          new Glide(document.querySelector(".widget_row_election"), {
            type: "carousel",
            perView: 2,
            gap: 20,
            slidesToShow: 2,
            dots: "#dots",
            autoplay: 2000,
            draggable: true,
            breakpoints: { 767: { perView: 1, gap: 10, slidesToShow: 1 } },
          }).mount();
          // getapi("https://stgurdu.news18.com/nodeapi/data/site_switcher_widget_assembly_election_2022");
        }
      }
    },
    onTimeout: function () {
      console.log("timeout!");
    },
    timeout: 50,
  });
}

async function _get_assembly_election_cons_home_slider(jsonUrl) {
  let response = await fetch(jsonUrl);
  response = await response.json();

  let cnameType = "cname";
  if (langType == "punjab") {
    cnameType = "CONS_NAME_PUNJABI";
  } else if (langType == "hindi") {
    cnameType = "CONS_NAME_HINDI";
  } else if (langType == "lokmat") {
    cnameType = "CONS_NAME_MARATHI";
  }
  let _consTop = "",
    _consTopOther = "";

  let liveBlogForLangUrl = "";
  if (apiForLiveblog != "") {
    let liveBlogForLangData = await fetch(apiForLiveblog);
    liveBlogForLangData = await liveBlogForLangData.json();

    if (liveBlogForLangData?.data?.site_switcher_widget_assembly_election) {
      liveBlogForLangUrl =
        liveBlogForLangData?.data?.site_switcher_widget_assembly_election
          ?.story_url || "";
    }
  }

  Object.values(response).map((value) => {
    let _consStatus = value.CANDI_STATUS ? value.CANDI_STATUS : "",
      cname = value[cnameType] || value.cname,
      _stFor = value.stateslug,
      ABBR = value.ABBR && _consStatus != "NA" ? value.ABBR : " -- ",
      WINNER_2017 = value.WINNER_2017 ? value.WINNER_2017 : "",
      _rhsTopConsColor = value.color ? value.color : "#bababa",
      _consStatusVal =
        _consStatus == "NA" || _consStatus == "" ? awaitLang : _consStatus,
      _rhsConsURL =
        "/" +
        switch_key +
        "/" +
        value.stateslug +
        "/" +
        _convertedToMainElecSlug(value.cname) +
        "-wise-election-results-live-" +
        _convertedToMainElecSlug(value.cons_id) +
        "/" +
        switch_url;
    if (_consStatusVal == awaitLang) {
      (_rhsTopConsColor = "#bababa"), (ABBR = " -- ");
    }
    if (_consStatus) {
      if (_consStatus.toLowerCase() == "won") {
        _consStatusVal = winsLang;
      } else if (_consStatus.toLowerCase() == "lost") {
        _consStatusVal = lossLang;
      } else if (_consStatus.toLowerCase() == "leading") {
        _consStatusVal = leadingLang;
      } else if (_consStatus.toLowerCase() == "trailing") {
        _consStatusVal = trailingLang;
      }
    }

    let liveBlogForLangConstWidgetUrl =
      liveBlogForLangUrl != "" ? liveBlogForLangUrl : _rhsConsURL;

    // console.log("langtype + url: ", [langType, liveBlogForLangConstWidgetUrl])

    if (langType == "punjab") {
      if (value.stateslug == "punjab") {
        _consTop +=
          '<li><a href="' +
          liveBlogForLangConstWidgetUrl +
          '"><span class="const-cname">' +
          cname +
          ' | <p class="state_abbr">' +
          stateAbbr[_stFor] +
          '</p></span><span class="party-status" style="background: ' +
          _rhsTopConsColor +
          '"><b>' +
          ABBR +
          "</b><em>" +
          _consStatusVal +
          '</em></span><span class="last-winner-party">2017: ' +
          WINNER_2017 +
          "</span></a></li>";
      } else {
        _consTopOther +=
          '<li><a href="' +
          liveBlogForLangConstWidgetUrl +
          '"><span class="const-cname">' +
          cname +
          ' | <p class="state_abbr">' +
          stateAbbr[_stFor] +
          '</p></span><span class="party-status" style="background: ' +
          _rhsTopConsColor +
          '"><b>' +
          ABBR +
          "</b><em>" +
          _consStatusVal +
          '</em></span><span class="last-winner-party">2017: ' +
          WINNER_2017 +
          "</span></a></li>";
      }
    } else if (langType == "lokmat") {
      if (value.stateslug == "goa") {
        _consTop +=
          '<li><a href="' +
          _rhsConsURL +
          '"><span class="const-cname">' +
          cname +
          ' | <p class="state_abbr">' +
          stateAbbr[_stFor] +
          '</p></span><span class="party-status" style="background: ' +
          _rhsTopConsColor +
          '"><b>' +
          ABBR +
          "</b><em>" +
          _consStatusVal +
          '</em></span><span class="last-winner-party">2017: ' +
          WINNER_2017 +
          "</span></a></li>";
      } else {
        _consTopOther +=
          '<li><a href="' +
          liveBlogForLangConstWidgetUrl +
          '"><span class="const-cname">' +
          cname +
          ' | <p class="state_abbr">' +
          stateAbbr[_stFor] +
          '</p></span><span class="party-status" style="background: ' +
          _rhsTopConsColor +
          '"><b>' +
          ABBR +
          "</b><em>" +
          _consStatusVal +
          '</em></span><span class="last-winner-party">2017: ' +
          WINNER_2017 +
          "</span></a></li>";
      }
    } else if (langType == "assam") {
      if (value.stateslug == "manipur") {
        _consTop +=
          '<li><a href="' +
          liveBlogForLangConstWidgetUrl +
          '"><span class="const-cname">' +
          cname +
          ' | <p class="state_abbr">' +
          stateAbbr[_stFor] +
          '</p></span><span class="party-status" style="background: ' +
          _rhsTopConsColor +
          '"><b>' +
          ABBR +
          "</b><em>" +
          _consStatusVal +
          '</em></span><span class="last-winner-party">2017: ' +
          WINNER_2017 +
          "</span></a></li>";
      } else {
        _consTopOther +=
          '<li><a href="' +
          liveBlogForLangConstWidgetUrl +
          '"><span class="const-cname">' +
          cname +
          ' | <p class="state_abbr">' +
          stateAbbr[_stFor] +
          '</p></span><span class="party-status" style="background: ' +
          _rhsTopConsColor +
          '"><b>' +
          ABBR +
          "</b><em>" +
          _consStatusVal +
          '</em></span><span class="last-winner-party">2017: ' +
          WINNER_2017 +
          "</span></a></li>";
      }
    } else {
      _consTop +=
        '<li><a href="' +
        liveBlogForLangConstWidgetUrl +
        '"><span class="const-cname">' +
        cname +
        ' | <p class="state_abbr">' +
        stateAbbr[_stFor] +
        '</p></span><span class="party-status" style="background: ' +
        _rhsTopConsColor +
        '"><b>' +
        ABBR +
        "</b><em>" +
        _consStatusVal +
        '</em></span><span class="last-winner-party">2017: ' +
        WINNER_2017 +
        "</span></a></li>";
    }
  });

  if (_consTop) {
    if (document.querySelector(".brcountday-contslider") != null) {
      document.querySelector(".brcountday-contslider").innerHTML =
        '<div data-glide-el="track" class="brcountday-contslider-in"><ul>' +
        _consTop +
        _consTopOther +
        '</ul><div class="brcountday-arrow" data-glide-el="controls"><button data-glide-dir="<"></button><button data-glide-dir=">"></button></div>';
    }
  }
  if (document.querySelector(".brcountday-contslider")) {
    new Glide(document.querySelector(".brcountday-contslider"), {
      type: "carousel",
      autoplay: 2000,
      perView: 8,
      rewind: false,
      slidesToScroll: 1,
      breakpoints: {
        600: {
          perView: 1.5,
        },
      },
    }).mount();
  }
}

function _get_assembly_election_cons_rhs(jsonUrl, _stFor) {
  var _jsonLokSabhaElectionURL = jsonUrl.replace(":state:", _stFor);
  // console.log("_jsonLokSabhaElectionURL", [_jsonLokSabhaElectionURL, _stFor])
  var _callbackLokSabhaName =
    "election_const_rhs_" + _stFor.replace("-", "_", _stFor);

  var _jsonAssemblyElectionURL = _jsonLokSabhaElectionURL;
  var liveBlogForLangUrl = "";

  _jsonp.send(_jsonAssemblyElectionURL, {
    callbackName: _callbackLokSabhaName,
    onSuccess: function (response) {
      if (!response || !Object.keys(response).length) {
        return false;
      }

      if (response != "" || Object.keys(response).length > 0) {
        var _consRHSDetail = `<table cellspacing="0" cellpadding="0"><tr><th>${consNameLableLang}</th><th>2022</th><th>2017</th><th>2012</th></tr>`;
        var _gridWidget = "";
        var _consTop = "";
        let cnameType = "cname";
        if (langType == "punjab") {
          cnameType = "CONS_NAME_PUNJABI";
        } else if (langType == "hindi") {
          cnameType = "CONS_NAME_HINDI";
        } else if (langType == "lokmat") {
          cnameType = "CONS_NAME_MARATHI";
        }
        Object.keys(response).forEach(function (key) {
          var value = response[key];
          var _consStatus = value.CANDI_STATUS ? value.CANDI_STATUS : "";
          var cname = value[cnameType] || value.cname;
          var ABBR = value.ABBR && _consStatus != "NA" ? value.ABBR : " -- ";
          var WINNER_2017 = value.WINNER_2017 ? value.WINNER_2017 : "";
          var WINNER_2012 = value.WINNER_2012 ? value.WINNER_2012 : "";
          var _rhsConsColor = value.color ? value.color : "#bababa";
          var _rhsTopConsColor = value.color ? value.color : "#bababa";
          var _consStatusVal = _consStatus == "NA" ? "AWAITED" : _consStatus;
          var _asMURL = ""; //_langText.state_url.replace(/xxx/g,_stFor);

          var _rhsConsURL =
            "/" +
            switch_key +
            "/" +
            value.stateslug +
            "/" +
            _convertedToMainElecSlug(value.cname) +
            "-election-result-" +
            _convertedToMainElecSlug(value.cons_id) +
            "/" +
            switch_url;
          _consRHSDetail +=
            '<tr data-rel="' +
            _rhsConsURL +
            '"><td><a href="' +
            _rhsConsURL +
            '" target="_parent">' +
            cname +
            '</a></td><td style="background: ' +
            _rhsConsColor +
            '; color:#fff">' +
            ABBR +
            '</td><td style="background: ' +
            value.party_color_2017 +
            '; color:#fff">' +
            WINNER_2017 +
            '</td><td style="background: ' +
            value.party_color_2012 +
            '; color:#fff">' +
            WINNER_2012 +
            "</td></tr>";
          var _consID = value.cons_id.toUpperCase();
          if (document.querySelector(".as2021-map #my_" + _consID)) {
            document.querySelector(".as2021-map #my_" + _consID).style.fill =
              _rhsConsColor;
          }
        });
        _consRHSDetail += "</table>";

        if (document.querySelector("#rhs-table-" + _stFor)) {
          document.querySelector("#rhs-table-" + _stFor).innerHTML =
            _consRHSDetail;
        }
      }
    },
    onTimeout: function () {
      console.log("timeout!");
    },
    timeout: 50,
  });
}

function _get_assembly_election_cons_rhs_f(jsonUrl, _stFor) {
  _stFor = _stFor.replace("-", "", _stFor);
  var _jsonLokSabhaElectionURL = jsonUrl;
  _jsonLokSabhaElectionURL = jsonUrl.replace(":state:", _stFor);
  var _callbackLokSabhaName = "election_const_rhs_" + _stFor;

  var _jsonAssemblyElectionURL = _jsonLokSabhaElectionURL;

  _jsonp.send(_jsonAssemblyElectionURL, {
    callbackName: _callbackLokSabhaName,
    onSuccess: function (response) {
      if (!response || !Object.keys(response).length) {
        return false;
      }

      if (response != "" || Object.keys(response).length > 0) {
        var _consRHSDetail = `<table cellspacing="0" cellpadding="0"><tr><th>${consNameLableLang}</th><th>2022</th><th>2017</th><th>2012</th></tr>`;
        var _gridWidget = "";
        var _consTop = "";
        Object.keys(response).forEach(function (key) {
          var value = response[key];
          var _consStatus = value.CANDI_STATUS ? value.CANDI_STATUS : "";
          var cname = value.cname;
          var ABBR = value.ABBR && _consStatus != "NA" ? value.ABBR : " -- ";
          var WINNER_2017 = value.WINNER_2017 ? value.WINNER_2017 : "";
          var WINNER_2012 = value.WINNER_2012 ? value.WINNER_2012 : "";
          var _rhsConsColor = value.color ? value.color : "#5B5B5B";
          var _rhsTopConsColor = value.color ? value.color : "#5B5B5B";
          var _consStatusVal = _consStatus == "NA" ? "AWAITED" : _consStatus;
          var _asMURL = ""; //_langText.state_url.replace(/xxx/g,_stFor);
          //var _rhsConsURL = '/'+switch_key+'/'+value.stateslug+'/'+_convertedToMainElecSlug(value.cname)+'-election-result-'+_convertedToMainElecSlug(value.cons_id)+'/';
          //var _rhsConsURL = '/'+switch_key+'/'+value.stateslug+'/constituency-wise-election-results-live-'+_convertedToMainElecSlug(value.cons_id)+'/';

          var _rhsConsURL =
            "/" +
            switch_key +
            "/" +
            value.stateslug +
            "/" +
            _convertedToMainElecSlug(value.cname) +
            "-election-result-" +
            _convertedToMainElecSlug(value.cons_id) +
            "/" +
            switch_url;
          _consRHSDetail +=
            '<tr class="show-hide ' +
            _convertedToMainElecSlug(value.RESERVATION) +
            '" data-rel="' +
            _rhsConsURL +
            '"><td><a href="' +
            _rhsConsURL +
            '">' +
            cname +
            '</a></td>     <td style="background: ' +
            _rhsConsColor +
            '; color:#fff">' +
            ABBR +
            '</td><td style="background: ' +
            value.party_color_2017 +
            '; color:#fff">' +
            WINNER_2017 +
            '</td><td style="background: ' +
            value.party_color_2012 +
            '; color:#fff">' +
            WINNER_2012 +
            "</td></tr>";
        });
        _consRHSDetail += "</table>";

        if (document.querySelector(".constResultWrap .tableWrap")) {
          document.querySelector(".constResultWrap .tableWrap").innerHTML =
            _consRHSDetail;
        }
      }
    },
    onTimeout: function () {
      console.log("timeout!");
    },
    timeout: 50,
  });
}

//Key Candidate data
async function _get_assembly_election_key_candidate(jsonUrl) {
  let liveBlogForLangUrl = "";
  if (apiForLiveblog != "") {
    let liveBlogForLangData = await fetch(apiForLiveblog);
    liveBlogForLangData = await liveBlogForLangData.json();

    if (liveBlogForLangData?.data?.site_switcher_widget_assembly_election) {
      liveBlogForLangUrl =
        liveBlogForLangData?.data?.site_switcher_widget_assembly_election
          ?.story_url || "";
    }
  }

  var _jsonLokSabhaElectionURL = jsonUrl;
  var _callbackLokSabhaName = "election_key_cand";

  _jsonp.send(_jsonLokSabhaElectionURL, {
    callbackName: _callbackLokSabhaName,
    onSuccess: function (response) {
      if (!response || !Object.keys(response).length) {
        return false;
      }
      if (response != "" || Object.keys(response).length > 0) {
        let newresponse = response;
        if (langType == "punjab") {
          newresponse = {
            punjab: response.punjab,
            "uttar-pradesh": response["uttar-pradesh"],
            uttarakhand: response.uttarakhand,
            goa: response.goa,
            manipur: response.manipur,
          };
        } else if (langType == "lokmat") {
          newresponse = {
            goa: response.goa,
            "uttar-pradesh": response["uttar-pradesh"],
            punjab: response.punjab,
            uttarakhand: response.uttarakhand,
            manipur: response.manipur,
          };
        } else if (langType == "assam") {
          newresponse = {
            manipur: response.manipur,
            "uttar-pradesh": response["uttar-pradesh"],
            punjab: response.punjab,
            uttarakhand: response.uttarakhand,
            goa: response.goa,
          };
        }
        const _result = Object.keys(response).map((i) => response[i]);
        var _candDetail =
          '<div data-glide-el="track" class="brcountday-candidateslider-in"><ul>';
        Object.keys(newresponse).forEach(function (val, key) {
          var arrVal = newresponse[val];
          Object.keys(arrVal).forEach(function (v, key) {
            var value = arrVal[v];
            var _candName = value[keyCandName] || value.cand_name || "";
            var _consName = value[keyConsName] || value.cons_name || "";
            var _consState = value.state || "";
            var _candStatus = value.CANDI_STATUS ? value.CANDI_STATUS : "";
            var _candStatusClass = "cndt-awaited";
            var candFullImage =
              value?.cand_full_image != ""
                ? value.cand_full_image
                : "https://images.news18.com/static_news18/pix/ibnhome/news18/election-2022/candidate_default_img.png";
            var _candStatusVal = _candStatus != "" ? _candStatus : awaitLang; //'AWAITED';
            if (_candStatusVal == "NA") {
              _candStatusVal = awaitLang; //'AWAITED';
            }

            if (_candStatus) {
              if (_candStatus.toLowerCase() == "won") {
                _candStatusClass = "cndt-won";
                _candStatusVal = winsLang;
              } else if (_candStatus.toLowerCase() == "lost") {
                _candStatusClass = "cndt-lost";
                _candStatusVal = lossLang;
              } else if (_candStatus.toLowerCase() == "leading") {
                _candStatusClass = "cndt-leading";
                _candStatusVal = leadingLang;
              } else if (_candStatus.toLowerCase() == "trailing") {
                _candStatusClass = "cndt-trailing";
                _candStatusVal = trailingLang;
              }
            }
            var _candBelongStateSlug = "";
            var _candBelongState = value.state;
            if (_candBelongState) {
              _candBelongStateSlug = _candBelongState
                .toLowerCase()
                .replace(" ", "-");
            }
            let _consStateShort = _convertedToMainElecSlug(_consState);

            var _candURL =
              "/" +
              switch_key +
              "/key-candidates/" +
              _convertedToMainElecSlug(value.cand_name) +
              "-" +
              value.candidate_id.toLowerCase() +
              "/" +
              switch_url;

            let liveBlogForLangKeyCandWidgetUrl =
              liveBlogForLangUrl != "" ? liveBlogForLangUrl : _candURL;
            // console.log("langtype + key cand url: ", [langType, liveBlogForLangKeyCandWidgetUrl])

            _candDetail +=
              '<li><a href="' +
              liveBlogForLangKeyCandWidgetUrl +
              '" class="' +
              _candStatusClass +
              '" style="border-bottom-color: ' +
              value.color_code +
              '"><figure><img src="' +
              candFullImage +
              '" alt="' +
              _candName +
              '" title="' +
              _candName +
              '"></figure><div class="candidateslider-details"><h3><b class="widgetcandi_name">' +
              _candName +
              "</b> <span>" +
              value.ABBR +
              " | " +
              _consName +
              ", " +
              stateAbbr[_consStateShort] +
              "</span></h3><p><b>" +
              _candStatusVal +
              "</b></p></div></a></li>";
          });
        });
        _candDetail +=
          '</ul><div class="brcountday-arrow" data-glide-el="controls"><button data-glide-dir="<"></button><button data-glide-dir=">"></button></div>';

        if (document.querySelector(".brcountday-candidateslider")) {
          document.querySelector(".brcountday-candidateslider").innerHTML =
            _candDetail;
          new Glide(document.querySelector(".brcountday-candidateslider"), {
            autoplay: 2000,
            perView: 4,
            rewind: false,
            type: "carousel",
            slidesToScroll: 1,
            breakpoints: {
              650: {
                perView: 1.2,
              },
            },
          }).mount();
        }
      }
    },
    onTimeout: function () {
      console.log("timeout!");
    },
    timeout: 50,
  });
}

var _getSlide = "";

function showSelectYearMap() {
  let e = document.getElementById("yearChange");
  let selectYare = e.value;
  let elem = document.querySelector("#map_ul_list li.active");
  let dataIdd = elem.getAttribute("data-rel");
  let hideElem = document.querySelectorAll("." + dataIdd + "-MAP div");
  for (let ij = 0; ij < hideElem.length; ij++) {
    hideElem[ij].classList.add("hide");
  }
  let shwElem = document.querySelector(
    "." + dataIdd + '-MAP [data-map-id="' + dataIdd + "_" + selectYare + '"]'
  );
  shwElem.classList.remove("hide");
}

function elecsTab(evt, cityName, id) {
  var i, tabcontent, tablinks;

  var tabcat = document.getElementById(id);

  tabcontent = tabcat.querySelectorAll(".tab-content");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].classList.add("hide");
  }
  tablinks = tabcat.querySelectorAll(".tab-links");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  var dynamiclass = document.querySelectorAll("." + cityName);
  for (l = 0; l < dynamiclass.length; l++) {
    dynamiclass[l].classList.remove("hide");
  }
  evt.currentTarget.className += " active";
  showSelectYearMap();
  if (cityName == "UP-MAP" || cityName == "UP") {
    _get_election_json_url_assembly_list_mapclick("uttar-pradesh");
  } else if (cityName == "PB-MAP" || cityName == "PB") {
    _get_election_json_url_assembly_list_mapclick("punjab");
  } else if (cityName == "UK-MAP" || cityName == "UK") {
    _get_election_json_url_assembly_list_mapclick("uttarakhand");
  } else if (cityName == "GA-MAP" || cityName == "GA") {
    _get_election_json_url_assembly_list_mapclick("goa");
  } else if (cityName == "MN-MAP" || cityName == "MN") {
    _get_election_json_url_assembly_list_mapclick("manipur");
  }
}

var _elecTabList = document.getElementsByClassName("elemaintab");
var _elecTabContent = document.getElementsByClassName("tab-content-f");
Array.from(_elecTabList).forEach(function (element) {
  element.addEventListener(
    "click",
    () => {
      let _t = element.getAttribute("data-rel");
      _removeClasses(_elecTabList);
      for (var i = 0; i < _elecTabContent.length; i++) {
        _elecTabContent[i].classList.add("hide");
      }
      element.classList.add("active");
      document.querySelector("." + _t).classList.remove("hide");
    },
    false
  );
});

function _removeClasses(els) {
  for (var i = 0; i < els.length; i++) {
    els[i].classList.remove("active");
  }
}

//Code for switch tabs
if (document.querySelector(".alliace-tally-homepage")) {
  var tabID = "aalliance";
  setInterval(function () {
    if (tabID == "aalliance") {
      tabID = "pparty";
      document.getElementById("pparty").click();
    } else {
      tabID = "aalliance";
      document.getElementById("aalliance").click();
    }
  }, 10000);
}

function _convertedToMainElecSlug(e) {
  if (e)
    return e
      .toLowerCase()
      .replace(/[^\w ]+/g, "")
      .replace(/ +/g, "-");
}
function acrossclick(url) {
  if (url) {
    let redirect_url = `${url}`;
    if (url.search("https:") < 0) {
      if (env == "live") {
        redirect_url =
          langType == "english"
            ? `https://www.news18.com${url}`
            : `https://${langType}.news18.com${url}`;
      } else {
        let localLangType = langType == "punjab" ? "punjabi" : langType;
        redirect_url =
          langType == "english"
            ? `https://${env}.news18.com${url}`
            : `https://${env}${localLangType}.news18.com${url}`;
      }
    }
    // location.href = url
    window.open(redirect_url, "_parent");
  }
}
function _rhsCalling(asElectionConstPath) {
  if (asElectionConstPath) {
    if (langType == "punjab") {
      _get_assembly_election_cons_rhs(asElectionConstPath, "punjab");
      _get_assembly_election_cons_rhs(asElectionConstPath, "uttar-pradesh");
      _get_assembly_election_cons_rhs(asElectionConstPath, "uttarakhand");
      _get_assembly_election_cons_rhs(asElectionConstPath, "goa");
      _get_assembly_election_cons_rhs(asElectionConstPath, "manipur");
    } else if (langType == "lokmat") {
      _get_assembly_election_cons_rhs(asElectionConstPath, "goa");
      _get_assembly_election_cons_rhs(asElectionConstPath, "uttar-pradesh");
      _get_assembly_election_cons_rhs(asElectionConstPath, "punjab");
      _get_assembly_election_cons_rhs(asElectionConstPath, "uttarakhand");
      _get_assembly_election_cons_rhs(asElectionConstPath, "manipur");
    } else if (langType == "assam") {
      _get_assembly_election_cons_rhs(asElectionConstPath, "manipur");
      _get_assembly_election_cons_rhs(asElectionConstPath, "uttar-pradesh");
      _get_assembly_election_cons_rhs(asElectionConstPath, "punjab");
      _get_assembly_election_cons_rhs(asElectionConstPath, "uttarakhand");
      _get_assembly_election_cons_rhs(asElectionConstPath, "goa");
    } else {
      _get_assembly_election_cons_rhs(asElectionConstPath, "uttar-pradesh");
      _get_assembly_election_cons_rhs(asElectionConstPath, "punjab");
      _get_assembly_election_cons_rhs(asElectionConstPath, "uttarakhand");
      _get_assembly_election_cons_rhs(asElectionConstPath, "goa");
      _get_assembly_election_cons_rhs(asElectionConstPath, "manipur");
    }
  }
}
_get_election_json_url_assembly_list();

searchFunc();

setInterval(function () {
  _get_election_json_url_assembly_list();
}, 28500);
var statesData = [];

// Search function
async function searchFunc() {
  let switchUrlAssembly = `https://election.nw18.com/electiondata/electionjson/assembly_election_2022/${url_env}/switchdata_normal.json`;

  let switchData = await fetch(switchUrlAssembly);
  switchData = await switchData.json();

  let cons_list_url = switchData.cons_list_with_lang;

  let partyPages = {
    english: `/${switch_key}/:state:/:partabbr:-:party:-party-detail/${switch_url}`,
    hindi: `/${switch_key}/:state:/:partabbr:-:party:-party-detail/${switch_url}`,
  };

  let siteToName = {
    english: (name) =>
      name == "uttarpradesh" ||
      name == "uttar-pradesh" ||
      name == "uttarakhand",
    hindi: (name) =>
      name == "uttarpradesh" ||
      name == "uttar-pradesh" ||
      name == "uttarakhand",
    lokmat: (name) => name == "goa",
    punjab: (name) => name == "punjab",
    punjabi: (name) => name == "punjab",
    assam: (name) => name == "manipur",
  };

  let partyData = await fetch(switchData.top_parties_details_all);
  partyData = await partyData.json();

  if (partyData) {
    let langTypeforParty = langType == "english" ? "english" : "hindi";
    Object.keys(partyData)
      .filter((state) =>
        langType == "hindi" ? true : siteToName[langType](state)
      )
      .forEach((state) => {
        Object.keys(partyData[state]).forEach((party) => {
          statesData.push({
            state: state,
            show: `${party} - ${
              langType == "hindi"
                ? partyData[state][party].party_full_name_hindi
                : partyData[state][party].party_full_name
            }, ${partyData[state][party].state_slug.toUpperCase()}`,
            search: party,
            searchtwo: partyData[state][party].party_full_name,
            url: `${partyPages[langTypeforParty]
              .replace(":state:", state)
              .replace(
                ":partabbr:",
                partyData[state][party].party_abbr.toLowerCase()
              )
              .replace(
                ":party:",
                partyData[state][party].party_full_slug
              )}${switch_url}`,
          });
        });
      });
  }

  let canData = await fetch(switchData.key_candidates_all);
  canData = await canData.json();

  if (canData) {
    let cand_name = langType == "english" ? "cand_name" : "CANDINAME_PUNJABI";
    Object.keys(canData)
      .filter((state) =>
        langType == "hindi" || langType == "english" || langType == "punjab"
          ? true
          : false
      )
      .forEach((state) => {
        Object.keys(canData[state]).forEach((can) => {
          statesData.push({
            state: state,
            show:
              langType == "hindi"
                ? `${canData[state][can].candidate_name_hi}, ${canData[state][can].state_hindi}`
                : `${canData[state][can][cand_name]}, ${canData[state][can].state}`,
            search: canData[state][can].cand_name,
            searchtwo: canData[state][can].cand_name,
            url:
              langType == "english"
                ? canData[state][can].cand_url + switch_url
                : canData[state][can].cand_url_hindi + switch_url,
          });
        });
      });
  }

  let constPage = {
    hindi: {
      "uttar-pradesh": `/${switch_key}/uttar-pradesh/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      goa: `/${switch_key}/goa/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      manipur: `/${switch_key}/manipur/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      uttarakhand: `/${switch_key}/uttarakhand/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      punjab: `/${switch_key}/punjab/:const:-wise-election-results-live-:const_id:/${switch_url}`,
    },
    lokmat: {
      goa: `/${switch_key}/goa/:const:-wise-election-results-live-:const_id:/${switch_url}`,
    },
    punjab: {
      "uttar-pradesh": `/${switch_key}/uttar-pradesh/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      goa: `/${switch_key}/goa/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      manipur: `/${switch_key}/manipur/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      uttarakhand: `/${switch_key}/uttarakhand/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      punjab: `/${switch_key}/punjab/:const:-wise-election-results-live-:const_id:/${switch_url}`,
    },
    assam: {
      manipur: `/${switch_key}/manipur/:const:-wise-election-results-live-:const_id:/${switch_url}`,
    },
    english: {
      "uttar-pradesh": `/${switch_key}/uttar-pradesh/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      goa: `/${switch_key}/goa/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      manipur: `/${switch_key}/manipur/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      uttarakhand: `/${switch_key}/uttarakhand/:const:-wise-election-results-live-:const_id:/${switch_url}`,
      punjab: `/${switch_key}/punjab/:const:-wise-election-results-live-:const_id:/${switch_url}`,
    },
  };

  function searchconsadder(name, data) {
    let cons_name = langType == "hindi" ? "cons_name_hindi" : "cons_name";
    Object.keys(data).forEach((item) => {
      statesData.push({
        state: "",
        show: `${data[item][cons_name]}`,
        search: data[item]["cons_name"],
        searchtwo: data[item]["cons_name_hindi"],
        url: constPage[langType][name]
          .replace(":const:", data[item]["cons_slug"].replaceAll(" ", "-"))
          .replace(":const_id:", item),
      });
    });
  }

  if (langType == "hindi" || langType == "punjab" || langType == "english") {
    let data = await fetch(cons_list_url.replace(/:state:/gi, "uttar-pradesh"));
    data = await data.json();
    searchconsadder("uttar-pradesh", data);

    data = await fetch(cons_list_url.replace(/:state:/gi, "uttarakhand"));
    data = await data.json();
    searchconsadder("uttarakhand", data);

    data = await fetch(cons_list_url.replace(/:state:/gi, "punjab"));
    data = await data.json();
    searchconsadder("punjab", data);
  }

  if (
    langType == "lokmat" ||
    langType == "punjab" ||
    langType == "hindi" ||
    langType == "english"
  ) {
    let data = await fetch(cons_list_url.replace(/:state:/gi, "goa"));
    data = await data.json();
    searchconsadder("goa", data);
  }

  if (
    langType == "assam" ||
    langType == "punjab" ||
    langType == "hindi" ||
    langType == "english"
  ) {
    let data = await fetch(cons_list_url.replace(/:state:/gi, "manipur"));
    data = await data.json();
    searchconsadder("manipur", data);
  }

  let searchedResult = document.getElementById("ass-autocomplete-results");
  let searchInput = document.querySelector(".assembly-search");
  // console.log("statesData:", statesData)
  if (searchedResult != null) {
    searchInput.addEventListener("keyup", function () {
      if (this.value.length > 2) {
        const matches = searching(statesData, this.value);

        if (!matches.length || this.value === "") searchedResult.innerHTML = "";
        else {
          const html = matches
            .map((match) => {
              const displayName = `${match.show}${
                match.type ? " - " + match.type : ""
              }`;
              return `<li><a href=${match.url}>${displayName}</a></li>`;
            })
            .join("");
          searchedResult.innerHTML = `${html}`;
          searchedResult.style.display = "block";
        }
      } else {
        searchedResult.style.display = "none";
      }
    });
  }

  function searching(statesData, word) {
    return statesData.filter((state) => {
      const regex = new RegExp("^" + word, "gi");
      return state["search"].match(regex) || state["searchtwo"].match(regex);
    });
  }
}
